(function(){var e;e=["ui.bootstrap","ngLuminateUtils","luminateControllers"],angular.module("ngLuminateLibrary",e),angular.module("luminateControllers",[]),angular.module("ngLuminateLibrary").constant("APP_INFO",{version:"1.0.0",rootPath:"/"}),angular.module("ngLuminateLibrary").run(["$rootScope",function(e){return e.frId=1070}]),angular.module("ngLuminateLibrary").config(["$luminateUtilsConfigProvider",function(e){e.setPath({nonsecure:"http://psdemo.convio.net/site/",secure:"https://secure2.convio.net/psdemo/site/"}).setKey("wDB09SQODRpVIOvX")}]),angular.module("ngLuminateLibrary").factory("TeamraiserCompanyService",["$luminateRest",function(r){return{getCompanies:function(e){var a;return a="method=getCompaniesByInfo",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserEventService",["$luminateTemplateTag",function(r){return{getTeamRaiserData:function(e){var a;return a={teamraiser:{eventDate:"[[S42:"+e+":event-date]]",goal:"[[S42:"+e+":goal]]",dollars:"[[S42:"+e+":dollars]]",prevFrId:"[[S42:"+e+":prev-fr-id]]",prevEventDate:"[[E42:[[E42:"+e+":prev-fr-id]]:event-date]]",prevDollars:"[[E42:[[E42:"+e+":prev-fr-id]]:dollars]]",prevTeams:"[[E42:[[E42:"+e+":prev-fr-id]]:num-teams]]",prevParticipants:"[[E42:[[E42:"+e+":prev-fr-id]]:num-participants]]",ageMin:"[[S47:"+e+":fr_info:1:age_minimum]]"}},r.parse(JSON.stringify(a)).then(function(e){return JSON.parse(e)})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserParticipantService",["$rootScope","$filter","$luminateRest","$luminateUtilsConfig","$luminateTemplateTag",function(i,o,r,s,t){return{getParticipantData:function(e){var a;return a={participant:{selfDonor:"[[S48:"+i.frId+"-"+e+":if-is-self-donor]]",teamCaptain:"[[S48:"+i.frId+"-"+e+":if-is-captain]]",onTeam:"[[S48:"+i.frId+"-"+e+":if-on-team]]",prevParticipant:"[[E48:[[S42:"+i.frId+":prev-fr-id]]-"+e+":participant-id]]",prevDollars:"[[E42:[[E42:"+i.frId+":prev-fr-id]]:dollars]]",fbFundraiser:"[[?xxUser Provided No Responsexdeletedx::x[[S48:"+i.frId+"-"+e+":question:Facebook Fundraiser ID:]]x::::[[S48:"+i.frId+"-"+e+":question:Facebook Fundraiser ID:]]]]",sentEmail:"[[S48:"+i.frId+"-"+e+":if-emails-gt:0]]",updatedPage:"[[S48:"+i.frId+"-"+e+":if-page-updated]]"}},t.parse(JSON.stringify(a)).then(function(e){return JSON.parse(e)})},getParticipants:function(e){var a;return a="method=getParticipants",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a})},getParticipantProgress:function(e){var a;return a="method=getParticipantProgress",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a})},getParticipantRank:function(e,n){var a;return a="method=getParticipants&first_name="+encodeURIComponent("%")+"&last_name="+encodeURIComponent("%")+"&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a}).then(function(e){var a,r,t;return r={},(a=null!=(t=e.data.getParticipantsResponse)?t.participant:void 0)&&(angular.isArray(a)||(a=[a]),r={rank:0,total:0},angular.forEach(a,function(e,a){if(r.total++,e.consId===String(n))return r={rank:a+1,total:r.total,amountRaised:o("currency")(e.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),amountRaisedFormatted:o("currency")(e.amountRaised/100,"$").replace(".00",""),goal:o("currency")(e.goal/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),goalFormatted:o("currency")(e.goal/100,"$").replace(".00",""),name:e.name.first+" "+e.name.last,consId:e.consId,pageUrl:s.path.secure+"TR?fr_id="+i.frId+"&pg=personal&px="+e.consId,donationUrl:e.donationUrl,aTeamCaptain:e.aTeamCaptain,teamName:e.teamName,teamPageUrl:e.teamPageUrl}})),r})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserTeamService",["$rootScope","$filter","$luminateRest","$luminateUtilsConfig",function(s,u,r,l){return{updateTeamInformation:function(e){var a;return a="method=updateTeamInformation&fr_id="+s.frId,e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a,requiresAuth:!0})},getTeams:function(e){var a;return a="method=getTeamsByInfo",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a,requiresAuth:!0})},getTeamDivisions:function(e){var a;return a="method=getTeamDivisions",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",data:a})},getTeamRank:function(e,o){var a;return a="method=getTeamsByInfo&first_name=%25&last_name=%25&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(a+="&"+e),r.request({api:"teamraiser",requiresAuth:!0,data:a}).then(function(e){var r,a,t,n,i;return r={},i=null!=(a=e.data.getTeamSearchByInfoResponse)?a.totalNumberResults:void 0,(n=null!=(t=e.data.getTeamSearchByInfoResponse)?t.team:void 0)&&(angular.isArray(n)||(n=[n]),r={rank:0,total:Number(i)},angular.forEach(n,function(e,a){if(e.id===String(o))return r={rank:a+1,total:Number(i),amountRaised:u("currency")(e.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),amountRaisedFormatted:u("currency")(e.amountRaised/100,"$").replace(".00",""),name:e.name,numMembers:e.numMembers,teamId:e.id,pageUrl:l.path.secure+"TR?fr_id="+s.frId+"&pg=team&team_id="+e.id}})),r})}}}]),angular.module("luminateControllers").controller("MainCtrl",["$scope",function(e){return e.ctrl={hide:!1,frId:1070,consId:1001491,teamId:1057,companyId:1013,amount:56500,goal:14e4}}]),angular.module("luminateControllers").directive("progressMeter",["APP_INFO","$rootScope",function(e,a){return{templateUrl:e.rootPath+"dist/html/directive/participationTypes.html",scope:{type:"@",showMeterPercent:"@",id:"=?",frId:"=?",progressData:"=?"},controller:["$rootScope","$scope","TeamraiserRegistrationService",function(e,a,r){return a.participationTypes=[],r.getParticipationTypes().then(function(e){if(e.data.getParticipationTypesResponse)return a.participationTypes=e.data.getParticipationTypesResponse.participationType,angular.forEach(a.participationTypes,function(e){var a;return a=e.description.replace(/(\r\n\t|\n|\r\t)/gm,"").trim(),e.description=a.replace(/\|/g,"<br />")})})}]}}]),angular.module("luminateControllers").directive("progressMeter",["APP_INFO","$rootScope",function(e,a){return{templateUrl:e.rootPath+"dist/html/directive/progressMeter.html",scope:{type:"@",showMeterPercent:"@",id:"=?",frId:"=?",progressData:"=?"},controller:["$rootScope","$scope","$filter","TeamraiserEventService","TeamraiserParticipantService","TeamraiserTeamService","TeamraiserCompanyService",function(e,t,n,a,r,i,o){var s,u;return s=t.frId?t.frId:e.frId,t.meter={goal:0,dollars:0,percent:0,hideMeter:null},u=function(e,a){var r;return r=e/a*100,t.meter={dollars:n("currency")(e/100,"$").replace(".00",""),goal:n("currency")(a/100,"$").replace(".00",""),percent:String(Math.round(r))+"%",hideMeter:r<t.showMeterPercent||r===1/0||NaN===r||null}},t.progressData?(t.progressData.amount/t.progressData.goal<t.showMeterPercent||null,u(t.progressData.amount,t.progressData.goal)):("event"===t.type&&a.getTeamRaiserData(s).then(function(e){var a,r,t;if(e.teamraiser)return t=e.teamraiser,a=Number(t.dollars.replace(/[^\d.]/g,"")),r=Number(t.goal.replace(/[^\d.]/g,"")),u(100*a,100*r)}),"individual"===t.type&&r.getParticipants("&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_page_size=1&fr_id="+s+"&list_filter_column=reg.cons_id&list_filter_text="+t.id).then(function(e){var a;if(e.data.getParticipantsResponse)return a=e.data.getParticipantsResponse.participant,u(Number(a.amountRaised),Number(a.goal))}),"team"===t.type&&i.getTeams("team_id="+t.id+"&fr_id="+s).then(function(e){var a;if(e.data.getTeamSearchByInfoResponse)return a=e.data.getTeamSearchByInfoResponse.team,u(Number(a.amountRaised),Number(a.goal))}),"company"===t.type?o.getCompanies("company_id="+t.id+"&fr_id="+s).then(function(e){var a;if(e.data.getCompaniesResponse)return a=e.data.getCompaniesResponse.company,u(a.amountRaised,a.goal)}):void 0)}]}}])}).call(this);