(function(){var e;e=["ui.bootstrap","ngLuminateUtils","luminateControllers"],angular.module("ngLuminateLibrary",e),angular.module("luminateControllers",[]),angular.module("ngLuminateLibrary").constant("APP_INFO",{version:"1.0.0",rootPath:"/"}),angular.module("ngLuminateLibrary").run(["$rootScope",function(e){return e.frId=1070}]),angular.module("ngLuminateLibrary").config(["$luminateUtilsConfigProvider",function(e){e.setPath({nonsecure:"http://psdemo.convio.net/site/",secure:"https://secure2.convio.net/psdemo/site/"}).setKey("wDB09SQODRpVIOvX")}]),angular.module("ngLuminateLibrary").factory("TeamraiserEventService",["$rootScope","$luminateTemplateTag",function(e,a){return{getTeamRaiserData:function(e){var r;return console.log(e),r={teamraiser:{eventDate:"[[S42:"+e+":event-date]]",goal:"[[S42:"+e+":goal]]",dollars:"[[S42:"+e+":dollars]]",prevFrId:"[[S42:"+e+":prev-fr-id]]",prevEventDate:"[[E42:[[E42:"+e+":prev-fr-id]]:event-date]]",prevDollars:"[[E42:[[E42:"+e+":prev-fr-id]]:dollars]]",prevTeams:"[[E42:[[E42:"+e+":prev-fr-id]]:num-teams]]",prevParticipants:"[[E42:[[E42:"+e+":prev-fr-id]]:num-participants]]",ageMin:"[[S47:"+e+":fr_info:1:age_minimum]]"}},a.parse(JSON.stringify(r)).then(function(e){return JSON.parse(e)})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserParticipantService",["$rootScope","$filter","$luminateRest","$luminateUtilsConfig","$luminateTemplateTag",function(i,o,a,s,t){return{getParticipantData:function(e){var r;return r={participant:{selfDonor:"[[S48:"+i.frId+"-"+e+":if-is-self-donor]]",teamCaptain:"[[S48:"+i.frId+"-"+e+":if-is-captain]]",onTeam:"[[S48:"+i.frId+"-"+e+":if-on-team]]",prevParticipant:"[[E48:[[S42:"+i.frId+":prev-fr-id]]-"+e+":participant-id]]",prevDollars:"[[E42:[[E42:"+i.frId+":prev-fr-id]]:dollars]]",fbFundraiser:"[[?xxUser Provided No Responsexdeletedx::x[[S48:"+i.frId+"-"+e+":question:Facebook Fundraiser ID:]]x::::[[S48:"+i.frId+"-"+e+":question:Facebook Fundraiser ID:]]]]",sentEmail:"[[S48:"+i.frId+"-"+e+":if-emails-gt:0]]",updatedPage:"[[S48:"+i.frId+"-"+e+":if-page-updated]]"}},t.parse(JSON.stringify(r)).then(function(e){return JSON.parse(e)})},getParticipants:function(e){var r;return r="method=getParticipants",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r})},getParticipantProgress:function(e){var r;return r="method=getParticipantProgress",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r})},getParticipantRank:function(e,n){var r;return r="method=getParticipants&first_name="+encodeURIComponent("%")+"&last_name="+encodeURIComponent("%")+"&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r}).then(function(e){var r,a,t;return a={},(r=null!=(t=e.data.getParticipantsResponse)?t.participant:void 0)&&(angular.isArray(r)||(r=[r]),a={rank:0,total:0},angular.forEach(r,function(e,r){if(a.total++,e.consId===String(n))return a={rank:r+1,total:a.total,amountRaised:o("currency")(e.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),amountRaisedFormatted:o("currency")(e.amountRaised/100,"$").replace(".00",""),goal:o("currency")(e.goal/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),goalFormatted:o("currency")(e.goal/100,"$").replace(".00",""),name:e.name.first+" "+e.name.last,consId:e.consId,pageUrl:s.path.secure+"TR?fr_id="+i.frId+"&pg=personal&px="+e.consId,donationUrl:e.donationUrl,aTeamCaptain:e.aTeamCaptain,teamName:e.teamName,teamPageUrl:e.teamPageUrl}})),a})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserTeamService",["$rootScope","$filter","$luminateRest","$luminateUtilsConfig",function(s,l,a,u){return{updateTeamInformation:function(e){var r;return r="method=updateTeamInformation&fr_id="+s.frId,e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r,requiresAuth:!0})},getTeams:function(e){var r;return r="method=getTeamsByInfo",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r,requiresAuth:!0})},getTeamDivisions:function(e){var r;return r="method=getTeamDivisions",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r})},getTeamRank:function(e,o){var r;return r="method=getTeamsByInfo&first_name=%25&last_name=%25&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",requiresAuth:!0,data:r}).then(function(e){var a,r,t,n,i;return a={},i=null!=(r=e.data.getTeamSearchByInfoResponse)?r.totalNumberResults:void 0,(n=null!=(t=e.data.getTeamSearchByInfoResponse)?t.team:void 0)&&(angular.isArray(n)||(n=[n]),a={rank:0,total:Number(i)},angular.forEach(n,function(e,r){if(e.id===String(o))return a={rank:r+1,total:Number(i),amountRaised:l("currency")(e.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),amountRaisedFormatted:l("currency")(e.amountRaised/100,"$").replace(".00",""),name:e.name,numMembers:e.numMembers,teamId:e.id,pageUrl:u.path.secure+"TR?fr_id="+s.frId+"&pg=team&team_id="+e.id}})),a})}}}]),angular.module("luminateControllers").controller("MainCtrl",["$rootScope","$scope",function(e,r){return console.log(e.frId),r.ctrl={hide:!1,frId:1070,consId:1001491}}]),angular.module("luminateControllers").directive("progressMeter",["APP_INFO","$rootScope",function(e,r){return{templateUrl:e.rootPath+"dist/html/directive/progressMeter.html",scope:{type:"@",showMeterPercent:"=",id:"@",frId:"@",progressData:"=?"},controller:["$rootScope","$scope","$filter","APP_INFO","TeamraiserEventService","TeamraiserParticipantService","TeamraiserTeamService",function(e,n,t,r,a,i,o){var s,l,u,m;return s=n.frId?n.frId:e.frId,n.meter={goal:0,dollars:0,percent:0,hideMeter:null},m=function(e,r,a){return n.meter={dollars:t("currency")(e/100,"$").replace(".00",""),goal:t("currency")(r/100,"$").replace(".00",""),percent:String(Math.round(e/r*100))+"%",hideMeter:a}},n.progressData?(u=n.progressData.amount/n.progressData.goal,l=u<n.showMeterPercent||null,m(n.progressData.amount,n.progressData.goal,l)):("individual"===n.type&&i.getParticipants("&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_page_size=1&fr_id="+s+"&list_filter_column=reg.cons_id&list_filter_text="+n.id).then(function(e){var r,a,t;if(e.data.getParticipantsResponse)return t=e.data.getParticipantsResponse.participant,r=Number(t.amountRaised),a=Number(t.goal),l=(u=r/a)<n.showMeterPercent||null,m(r,a,l)}),"event"===n.type?a.getTeamRaiserData(s).then(function(e){var r,a,t;if(e.teamraiser)return t=e.teamraiser,r=Number(t.dollars.replace(/[^\d.]/g,"")),a=Number(t.goal.replace(/[^\d.]/g,"")),l=(u=r/a*100)<n.showMeterPercent||null,m(100*r,100*a,l)}):void 0)}]}}])}).call(this);