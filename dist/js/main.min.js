(function(){var e;e=["luminateControllers","ui.bootstrap","ngLuminateUtils"],angular.module("ngLuminateLibrary",e),angular.module("luminateControllers",[]),angular.module("ngLuminateLibrary").constant("APP_INFO",{version:"1.0.0",rootPath:"/"}),angular.module("ngLuminateLibrary").run(["$rootScope",function(e){return e.frId=29300}]),angular.module("ngLuminateLibrary").factory("TeamraiserDataService",["$rootScope","$luminateTemplateTag",function(r,a){return{getTeamRaiserData:function(){var e;return e={teamraiser:{eventDate:"[[S42:"+r.frId+":event-date]]",goal:"[[S42:"+r.frId+":goal]]",dollars:"[[S42:"+r.frId+":dollars]]",prevFrId:"[[S42:"+r.frId+":prev-fr-id]]",prevEventDate:"[[E42:[[E42:"+r.frId+":prev-fr-id]]:event-date]]",prevDollars:"[[E42:[[E42:"+r.frId+":prev-fr-id]]:dollars]]",prevTeams:"[[E42:[[E42:"+r.frId+":prev-fr-id]]:num-teams]]",prevParticipants:"[[E42:[[E42:"+r.frId+":prev-fr-id]]:num-participants]]",ageMin:"[[S47:"+r.frId+":fr_info:1:age_minimum]]"}},a.parse(JSON.stringify(e)).then(function(e){return JSON.parse(e)})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserParticipantService",["$rootScope","$filter","$luminateRest","$luminateUtilsConfig","$luminateTemplateTag",function(i,o,a,l,t){return{getParticipantData:function(e){var r;return r={participant:{selfDonor:"[[S48:"+i.frId+"-"+e+":if-is-self-donor]]",teamCaptain:"[[S48:"+i.frId+"-"+e+":if-is-captain]]",onTeam:"[[S48:"+i.frId+"-"+e+":if-on-team]]",prevParticipant:"[[E48:[[S42:"+i.frId+":prev-fr-id]]-"+e+":participant-id]]",prevParticipantYears:"[[S48:"+i.frId+"-"+e+":question:Please tell us how many years you have participated in "+i.programName+". We would like to recognize you for your commitment.]]",prevDollars:"[[E42:[[E42:"+i.frId+":prev-fr-id]]:dollars]]",fbFundraiser:"[[?xxUser Provided No Responsexdeletedx::x[[S48:"+i.frId+"-"+e+":question:Facebook Fundraiser ID:]]x::::[[S48:"+i.frId+"-"+e+":question:Facebook Fundraiser ID:]]]]",mobileApp:"[[S48:"+i.frId+"-"+e+":if-in-group:"+i.mobileAppGroupId+"]]",sentEmail:"[[S48:"+i.frId+"-"+e+":if-emails-gt:0]]",updatedPage:"[[S48:"+i.frId+"-"+e+":if-page-updated]]"}},t.parse(JSON.stringify(r)).then(function(e){return JSON.parse(e)})},getParticipants:function(e){var r;return r="method=getParticipants",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r})},getParticipantProgress:function(e){var r;return r="method=getParticipantProgress",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r})},getParticipantRank:function(e,n){var r;return r="method=getParticipants&first_name="+encodeURIComponent("%")+"&last_name="+encodeURIComponent("%")+"&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r}).then(function(e){var r,a,t;return a={},(r=null!=(t=e.data.getParticipantsResponse)?t.participant:void 0)&&(angular.isArray(r)||(r=[r]),a={rank:0,total:0},angular.forEach(r,function(e,r){if(a.total++,e.consId===String(n))return a={rank:r+1,total:a.total,amountRaised:o("currency")(e.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),amountRaisedFormatted:o("currency")(e.amountRaised/100,"$").replace(".00",""),goal:o("currency")(e.goal/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),goalFormatted:o("currency")(e.goal/100,"$").replace(".00",""),name:e.name.first+" "+e.name.last,consId:e.consId,pageUrl:l.path.secure+"TR?fr_id="+i.frId+"&pg=personal&px="+e.consId,donationUrl:e.donationUrl,aTeamCaptain:e.aTeamCaptain,teamName:e.teamName,teamPageUrl:e.teamPageUrl}})),a})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserTeamService",["$rootScope","$filter","$luminateRest","$luminateUtilsConfig",function(l,s,a,m){return{updateTeamInformation:function(e){var r;return r="method=updateTeamInformation&fr_id="+l.frId,e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r,requiresAuth:!0})},getTeams:function(e){var r;return r="method=getTeamsByInfo",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r,requiresAuth:!0})},getTeamDivisions:function(e){var r;return r="method=getTeamDivisions",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",data:r})},getTeamRank:function(e,o){var r;return r="method=getTeamsByInfo&first_name=%25&last_name=%25&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(r+="&"+e),a.request({api:"teamraiser",requiresAuth:!0,data:r}).then(function(e){var a,r,t,n,i;return a={},i=null!=(r=e.data.getTeamSearchByInfoResponse)?r.totalNumberResults:void 0,(n=null!=(t=e.data.getTeamSearchByInfoResponse)?t.team:void 0)&&(angular.isArray(n)||(n=[n]),a={rank:0,total:Number(i)},angular.forEach(n,function(e,r){if(e.id===String(o))return a={rank:r+1,total:Number(i),amountRaised:s("currency")(e.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),amountRaisedFormatted:s("currency")(e.amountRaised/100,"$").replace(".00",""),name:e.name,numMembers:e.numMembers,teamId:e.id,pageUrl:m.path.secure+"TR?fr_id="+l.frId+"&pg=team&team_id="+e.id}})),a})}}}]),angular.module("luminateControllers").directive("progressMeter",["APP_INFO","$rootScope",function(e,r){return{templateUrl:e.rootPath+"dist/html/directive/progressMeter.html",controller:["$rootScope","$scope","$attrs","APP_INFO","TeamraiserDataService","TeamraiserParticipantService","TeamraiserTeamService",function(l,s,e,r,m,a,t,n,i){return s.type=e.type,s.attrs=e,s.location=e.location?s.$eval(e.location):null,s.meter={isLoading:!0,goal:0,dollars:0,dollarsFormatted:0,message:null,prevYear:"",prevDollars:0,prevTeams:0,prevParticipants:0,hideTherm:!1},e.raised&&e.goal&&e.percent?s.meter={goal:m("currency")(Number(s.$eval(e.goal))/100,"$").replace(".00",""),dollars:m("currency")(Number(s.$eval(e.raised))/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),dollarsFormatted:m("currency")(Number(s.$eval(e.raised))/100,"$").replace(".00",""),percent:s.$eval(e.percent)+"%",rank:s.$eval(e.rank),total:s.$eval(e.total),daysLeft:s.$eval(e.daysLeft),teamMembers:s.$eval(e.teamMembers),teamCount:s.$eval(e.teamCount),participantCount:s.$eval(e.participantCount),hideTherm:"0"===s.$eval(e.hideTherm)}:("individual"===e.type&&n.getParticipants("&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_page_size=1&fr_id="+l.frId+"&list_filter_column=reg.cons_id&list_filter_text="+l.consId).then(function(e){var r;if(e.data.getParticipantsResponse)return r=e.data.getParticipantsResponse.participant,s.meter={percent:String(Math.round(r.amountRaised/r.goal*100))+"%",goal:m("currency")(r.goal/100,"$").replace(".00",""),dollars:m("currency")(r.amountRaised/100,"$").replace("$","").replace(/,/g,"").replace(".00",""),dollarsFormatted:m("currency")(r.amountRaised/100,"$").replace(".00","")}}),"event"===e.type&&t.getTeamRaiserData().then(function(e){var r,a,t,n;return e.teamraiser&&(n=e.teamraiser,s.meter.goal=n.goal,s.meter.dollars=n.dollars,s.meter.dollarsFormatted=n.dollars,s.meter.prevDollars=n.prevDollars,s.meter.prevParticipants=n.prevParticipants,s.meter.prevTeams=n.prevTeams,""!==n.prevEventDate&&(s.meter.prevYear=n.prevEventDate.split("/")[2]),a=Number(s.meter.goal.replace(/[^\d.]/g,"")),r=Number(s.meter.dollars.replace(/[^\d.]/g,"")),0<a&&0<r?(t=r/a*100,s.meter.percent=String(Math.round(r/a*100))+"%",t<25&&"Unrecognized type parameter"!==n.prevFrId&&(s.meter.showPrevYear=!0)):"Unrecognized type parameter"!==n.prevFrId&&(s.meter.showPrevYear=!0)),delete s.meter.isLoading})),s.refreshFundraisingProgress=function(){return n.getParticipantProgress("fr_id="+l.frId).then(function(e){var r,a,t,n,i,o;return r=e.data.getParticipantProgressResponse.personalProgress,((null!=(a=s.participantRegistration)?a.teamId:void 0)&&"-1"!==(null!=(t=s.participantRegistration)?t.teamId:void 0)||(null!=(n=l.dashboard)&&null!=(i=n.registration)?i.teamId:void 0))&&(o=e.data.getParticipantProgressResponse.teamProgress),s.meter.goal="team"===s.type?m("currency")(Number(o.goal)/100,"$").replace(".00",""):m("currency")(Number(r.goal)/100,"$").replace(".00",""),s.meter.percent="team"===s.type?o.percent+"%":r.percent+"%",s.$$phase||s.$apply(),e})}}]}}]),angular.module("luminateControllers").controller("MainCtrl",["$rootScope","$scope",function(e,r){return console.log(e.frId)}])}).call(this);