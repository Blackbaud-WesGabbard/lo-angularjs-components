(function(){var e,t,a;e=["ngSanitize","ngTouch","ui.bootstrap","ngLuminateUtils","luminateControllers"],angular.module("ngLuminateLibrary",e),angular.module("luminateControllers",[]),angular.module("ngLuminateLibrary").constant("APP_INFO",{version:"1.0.0",rootPath:(a="../dist/app/",(t=luminateProperties.ngLibraryRoot)&&""!==t&&(a=t),a)}),angular.module("ngLuminateLibrary").run(["$rootScope",function(e){return e.frId=luminateProperties.frId?luminateProperties.frId:null,e.nonSecure=luminateProperties.nonSecure,e.secure=luminateProperties.secure,e.path=luminateProperties.secure.replace("/site/","")}]),angular.element(document).ready(function(){if(!angular.element(document).injector())return angular.bootstrap(document,["ngLuminateLibrary"])}),angular.module("ngLuminateLibrary").config(["$luminateUtilsConfigProvider",function(e){e.setPath({nonsecure:luminateProperties.nonSecure,secure:luminateProperties.secure}).setKey(luminateProperties.apiKey)}]),angular.module("ngLuminateLibrary").factory("AuthService",["$luminateRest",function(r){return{login:function(e){var t;return t="method=login",e&&""!==e&&(t+="&"+e),r.request({api:"cons",data:t})},createUser:function(e){var t;return t="method=create",e&&""!==e&&(t+="&"+e),r.request({api:"cons",data:t})},updateUser:function(e){var t;return t="method=update",e&&""!==e&&(t+="&"+e),r.request({api:"cons",data:t,requiresAuth:!0})},changePassword:function(e,t){var a;return a="method=changePassword",e&&""!==e&&(a+="&"+e),r.request({api:"cons",data:a,requiresAuth:!0})}}}]),angular.module("ngLuminateLibrary").factory("DonationService",["$luminateRest",function(a){return{getDonationFormInfo:function(e){var t;return t="method=getDonationFormInfo",e&&""!==e&&(t+="&"+e),a.request({api:"donation",data:t})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserCompanyService",["$rootScope","$luminateRest","$luminateTemplateTag",function(a,r,n){return{getCompanies:function(e){var t;return t="method=getCompaniesByInfo",e&&""!==e&&(t+="&"+e),r.request({api:"teamraiser",data:t})},getCoordinatorData:function(e){var t;return t={coordinator:{firstName:"[[E48:"+a.frId+"-"+e+":cons.first_name]]",lastName:"[[E48:"+a.frId+"-"+e+":cons.last_name]]",email:"[[E48:"+a.frId+"-"+e+":cons.primary_email]]",selfDonor:"[[S48:"+a.frId+"-"+e+":if-is-self-donor]]",teamCaptain:"[[S48:"+a.frId+"-"+e+":if-is-captain]]",onTeam:"[[S48:"+a.frId+"-"+e+":if-on-team]]",prevParticipant:"[[E48:[[S42:"+a.frId+":prev-fr-id]]-"+e+":participant-id]]",prevDollars:"[[E42:[[E42:"+a.frId+":prev-fr-id]]:dollars]]",fbFundraiser:"[[?xxUser Provided No Responsexdeletedx::x[[S48:"+a.frId+"-"+e+":question:Facebook Fundraiser ID:]]x::::[[S48:"+a.frId+"-"+e+":question:Facebook Fundraiser ID:]]]]",sentEmail:"[[S48:"+a.frId+"-"+e+":if-emails-gt:0]]",updatedPage:"[[S48:"+a.frId+"-"+e+":if-page-updated]]"}},n.parse(JSON.stringify(t)).then(function(e){return JSON.parse(e)})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserEventService",["$luminateTemplateTag","$luminateRest",function(a,r){return{getTeamRaiserData:function(e){var t;return t={teamraiser:{eventDate:"[[S42:"+e+":event-date]]",formId:"[[S42:"+e+":form-id]]",goal:"[[S42:"+e+":goal]]",dollars:"[[S42:"+e+":dollars]]",prevFrId:"[[S42:"+e+":prev-fr-id]]",prevEventDate:"[[E42:[[E42:"+e+":prev-fr-id]]:event-date]]",prevDollars:"[[E42:[[E42:"+e+":prev-fr-id]]:dollars]]",prevTeams:"[[E42:[[E42:"+e+":prev-fr-id]]:num-teams]]",prevParticipants:"[[E42:[[E42:"+e+":prev-fr-id]]:num-participants]]",customBadge1:{url:"[[S47:"+e+":fr_info:1:custom_badge_1_url]]",name:"[[S47:"+e+":fr_info:1:custom_badge_1_name]]"},customBadge2:{url:"[[S47:"+e+":fr_info:1:custom_badge_2_url]]",name:"[[S47:"+e+":fr_info:1:custom_badge_2_name]]"},customBadge3:{url:"[[S47:"+e+":fr_info:1:custom_badge_3_url]]",name:"[[S47:"+e+":fr_info:1:custom_badge_3_name]]"},customBadge4:{url:"[[S47:"+e+":fr_info:1:custom_badge_4_url]]",name:"[[S47:"+e+":fr_info:1:custom_badge_4_name]]"},customBadge5:{url:"[[S47:"+e+":fr_info:1:custom_badge_5_url]]",name:"[[S47:"+e+":fr_info:1:custom_badge_5_name]]"}}},a.parse(JSON.stringify(t)).then(function(e){return JSON.parse(e)})},getTeamraiserConfig:function(e){var t;return t="method=getTeamraiserConfig",e&&""!==e&&(t+="&"+e),r.request({api:"teamraiser",data:t})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserParticipantService",["$rootScope","$luminateRest","$luminateUtilsConfig","$luminateTemplateTag",function(a,r,e,n){return{getParticipantData:function(e){var t;return t={participant:{selfDonor:"[[S48:"+a.frId+"-"+e+":if-is-self-donor]]",teamCaptain:"[[S48:"+a.frId+"-"+e+":if-is-captain]]",onTeam:"[[S48:"+a.frId+"-"+e+":if-on-team]]",prevParticipant:"[[E48:[[S42:"+a.frId+":prev-fr-id]]-"+e+":participant-id]]",prevDollars:"[[E42:[[E42:"+a.frId+":prev-fr-id]]:dollars]]",fbFundraiser:"[[?xxUser Provided No Responsexdeletedx::x[[S48:"+a.frId+"-"+e+":question:Facebook Fundraiser ID:]]x::::[[S48:"+a.frId+"-"+e+":question:Facebook Fundraiser ID:]]]]",sentEmail:"[[S48:"+a.frId+"-"+e+":if-emails-gt:0]]",updatedPage:"[[S48:"+a.frId+"-"+e+":if-page-updated]]"}},n.parse(JSON.stringify(t)).then(function(e){return JSON.parse(e)})},getParticipants:function(e){var t;return t="method=getParticipants",e&&""!==e&&(t+="&"+e),r.request({api:"teamraiser",data:t})},getParticipantProgress:function(e){var t;return t="method=getParticipantProgress",e&&""!==e&&(t+="&"+e),r.request({api:"teamraiser",data:t})},getParticipantRank:function(e,s){var t;return t="method=getParticipants&&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(t+="&"+e),r.request({api:"teamraiser",data:t}).then(function(e){var t,a,r,n,i;return a={},i=null!=(r=e.data.getParticipantsResponse)?r.totalNumberResults:void 0,(t=null!=(n=e.data.getParticipantsResponse)?n.participant:void 0)&&(angular.isArray(t)||(t=[t]),a={rank:0,totalParticipants:i},angular.forEach(t,function(e,t){if(e.consId===String(s))return a={rank:t+1,totalParticipants:i,participantInfo:e}})),a})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserRegistrationService",["$luminateRest",function(a){return{getParticipationTypes:function(e){var t;return t="method=getParticipationTypes",e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",data:t})},getRegistration:function(e){var t;return t="method=getRegistration",e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",data:t,requiresAuth:!0})},getRegistrationDocument:function(e){var t;return t="method=getRegistrationDocument&fr_id="+$rootScope.frId,e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",data:t})},updateRegistration:function(e){var t;return t="method=updateRegistration",e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",data:t,requiresAuth:!0})}}}]),angular.module("ngLuminateLibrary").factory("TeamraiserTeamService",["$luminateRest",function(a){return{getTeams:function(e){var t;return t="method=getTeamsByInfo",e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",data:t,requiresAuth:!0})},getTeamDivisions:function(e){var t;return t="method=getTeamDivisions",e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",data:t})},getTeamRank:function(e,s){var t;return t="method=getTeamsByInfo&first_name=%25&last_name=%25&list_sort_column=total&list_ascending=false&list_page_size=500",e&&""!==e&&(t+="&"+e),a.request({api:"teamraiser",requiresAuth:!0,data:t}).then(function(e){var a,t,r,n,i;return a={},i=null!=(t=e.data.getTeamSearchByInfoResponse)?t.totalNumberResults:void 0,(n=null!=(r=e.data.getTeamSearchByInfoResponse)?r.team:void 0)&&(angular.isArray(n)||(n=[n]),a={rank:0,total:Number(i)},angular.forEach(n,function(e,t){if(e.id===String(s))return a={rank:t+1,totalTeams:Number(i),teamInfo:e}})),a})}}}]),angular.module("luminateControllers").directive("donationLevels",["APP_INFO","$rootScope",function(e,t){return{templateUrl:e.rootPath+"html/directive/donationLevels.html",scope:{frId:"@",formId:"@",buttonSize:"@",noThanks:"@",donationLevelsData:"=?"},controller:["$rootScope","$scope","TeamraiserEventService","DonationService",function(e,a,t,r){var n;return a.state={activeLevel:null,donationFee:0,type:null},a.donationLevels="loading",n=function(e){return a.donationLevels=e,a.state.type=e.manualAllowed?"registration":"donation"},a.donationLevelsData?(n(a.donationLevelsData),a.$watch("donationLevelsData",function(e){return n(a.donationLevelsData)})):a.formId?r.getDonationFormInfo("form_id="+a.formId).then(function(e){if(e.data.getDonationFormInfoResponse)return n(e.data.getDonationFormInfoResponse.donationLevels)}):a.frId&&t.getTeamraiserConfig("fr_id="+a.frId).then(function(e){if(e.data.getTeamraiserConfigResponse)return n(e.data.getTeamraiserConfigResponse.teamraiserConfig.donationLevels)}),a.setOtherAmount=function(e){return a.state.ng_donation_level="-1",e=(a.state.ng_donation_level_other_amount=e).replace("$",""),a.state.donationFee="0"===e?0:100*Number(e)},a.toggleDonationLevel=function(e){return"none"===e?(a.state.ng_donation_level_other_amount="",a.state.ng_donation_level="$0.00",a.state.activeLevel=e,a.state.donationFee=0):"other"===e?(a.state.activeLevel=e,void 0===a.state.ng_donation_level_other_amount?a.setOtherAmount(""):a.setOtherAmount(a.state.ng_donation_level_other_amount)):(a.state.ng_donation_level_other_amount="",a.state.ng_donation_level=e.amount.formatted,a.state.activeLevel=e.amount.formatted,a.state.donationFee=100*Number(e.amount.decimal))},a.$watch("state",function(e,t){e!==t&&a.$emit("selectedDonationLevel",a.state)},!0)}]}}]),angular.module("luminateControllers").directive("donorTeamSearch",["APP_INFO","$rootScope",function(e,t){return{templateUrl:e.rootPath+"html/directive/donorTeamSearch.html",scope:{frId:"@",eventType:"@",sizeLimit:"@",sortAscending:"@",showBadges:"@"},controller:["$rootScope","$scope","$httpParamSerializer","TeamraiserParticipantService","TeamraiserTeamService",function(e,a,t,r,n){var i;return a.frId=a.frId?a.frId:e.frId,a.state={isLoading:!1,searchSubmitted:!1,searchType:null,firstName:null,lastName:null,teamName:null,errorMessage:null,noResultsMsg:"Your search returned no results.",searchResults:[],totalResults:0,currentPage:1,offset:null},i=function(){var e;return e={list_page_size:a.sizeLimit?a.sizeLimit:null,list_ascending:a.sortAscending?a.sortAscending:null,list_page_offset:a.state.offset?a.state.offset:null,list_sort_column:"participants"===a.state.searchType?"first_name":"name"},a.eventType?e.event_type=a.eventType:a.frId&&(e.fr_id=a.frId),"participants"===a.state.searchType&&(e.first_name=a.state.firstName?a.state.firstName:"%",e.last_name=a.state.lastName?a.state.lastName:"%%",e.list_filter_column="private_page",e.list_filter_text=0),"teams"===a.state.searchType&&(e.team_name=a.state.teamName?a.state.teamName:"%%"),e},a.findParticipants=function(e){return a.state.isLoading=!0,a.state.searchSubmitted=!0,a.state.searchType="participants",e||(a.state.currentPage=1,delete a.state.offset),a.searchTerm=a.state.firstName?a.state.firstName:"%",r.getParticipants(t(i())).then(function(e){var t;return e.data.errorResponse?(a.state.searchResults=[],a.state.errorMessage=e.data.errorResponse.message):(a.state.searchResults=null!=(t=e.data.getParticipantsResponse)?t.participant:void 0,a.state.totalResults=e.data.getParticipantsResponse.totalNumberResults?Number(e.data.getParticipantsResponse.totalNumberResults):0,a.state.searchResults&&(angular.isArray(a.state.searchResults)||(a.state.searchResults=[a.state.searchResults])),a.state.errorMessage=a.state.searchResults?null:a.state.noResultsMsg),delete a.state.isLoading})},a.findTeams=function(e){return a.state.isLoading=!0,a.state.searchSubmitted=!0,a.state.searchType="teams",e||(a.state.currentPage=1,delete a.state.offset),n.getTeams(t(i())).then(function(e){var t;return e.data.errorResponse?(a.state.searchResults=[],a.state.errorMessage=e.data.errorResponse.message):(a.state.searchResults=null!=(t=e.data.getTeamSearchByInfoResponse)?t.team:void 0,a.state.totalResults=e.data.getTeamSearchByInfoResponse.totalNumberResults?Number(e.data.getTeamSearchByInfoResponse.totalNumberResults):0,a.state.searchResults&&(angular.isArray(a.state.searchResults)||(a.state.searchResults=[a.state.searchResults])),a.state.errorMessage=a.state.searchResults?null:a.state.noResultsMsg),delete a.state.isLoading})},a.paginateResults=function(e){if(a.state.offset=a.state.currentPage-1,"participants"===e&&a.findParticipants(!0),"teams"===e)return a.findTeams(!0)}}]}}]),angular.module("luminateControllers").directive("honorRoll",["APP_INFO","$rootScope",function(e,t){return{templateUrl:e.rootPath+"html/directive/honorRoll.html",scope:{type:"@",sizeLimit:"@",id:"@",frId:"@",listData:"=?"},controller:["$rootScope","$scope","$luminateTemplateTag",function(e,a,t){return a.frId=a.frId?a.frId:e.frId,a.list="loading",a.sizeLimit?a.sizeLimit:100,a.listData?(a.list=a.listData,a.$watch("listData",function(e){return a.list=a.listData})):(a.list=[],"participant"===a.type&&t.parse("[[S36:top_gifts_list,"+a.frId+",0,"+a.id+",LIST,SUM,"+a.sizeLimit+",]] ").then(function(e){if(0<e.indexOf("<li>"))return e.replace(/<li>(.*?)<\/li>/g,function(e,t){return t={name:(t=t.replace("-&nbsp;","")).split("&nbsp;")[0],amountRaised:t.split("&nbsp;")[1]},a.list.push(t)})}),"team"===a.type?t.parse("[[S36:team_donor_list,"+a.frId+","+a.id+",0,LIST,SUM,"+a.sizeLimit+",]] ").then(function(e){if(0<e.indexOf("<li>"))return e.replace(/<li>(.*?)<\/li>/g,function(e,t){return t={name:(t=t.replace("-&nbsp;","")).split("&nbsp;")[0],amountRaised:t.split("&nbsp;")[1]},a.list.push(t)})}):void 0)}]}}]),angular.module("luminateControllers").directive("loadingIndicator",["APP_INFO",function(e){return{templateUrl:e.rootPath+"html/directive/loadingIndicator.html",replace:!0,scope:{size:"@",text:"@"},controller:["$scope",function(e){return e.size=e.size?e.size:4}]}}]),angular.module("luminateControllers").directive("loginForm",["APP_INFO",function(e){return{templateUrl:e.rootPath+"html/directive/loginForm.html",scope:{layout:"@",showLables:"@",formSize:"@"},controller:["$scope","$httpParamSerializer","AuthService",function(t,e,a){return t.state={errorMsg:null},t.layout=t.layout?t.layout:"vertical",t.showLables=!t.showLables||t.showLables,t.loginUser=function(){if(t.loginForm.$valid)return a.login(e(t.loginUser)).then(function(e){return e.data.errorResponse?t.state.errorMsg=e.data.errorResponse.message:e.data.loginResponse?location.reload():void 0})}}]}}]),angular.module("luminateControllers").directive("participationTypes",["APP_INFO","$rootScope",function(e,t){return{templateUrl:e.rootPath+"html/directive/participationTypes.html",scope:{frId:"@",layout:"@",participationTypesData:"=?"},controller:["$rootScope","$scope","TeamraiserRegistrationService",function(e,t,a){var r;return t.frId=t.frId?t.frId:e.frId,t.state={selectedParticipationType:null},t.participationTypes="loading",r=function(e){return t.participationTypes=e},t.participationTypesData?(r(t.participationTypesData),t.$watch("participationTypesData",function(e){return r(t.participationTypesData)})):a.getParticipationTypes("fr_id="+t.frId).then(function(e){if(e.data.getParticipationTypesResponse)return r(e.data.getParticipationTypesResponse.participationType)})}]}}]),angular.module("luminateControllers").directive("passwordReset",["APP_INFO",function(e){return{templateUrl:e.rootPath+"html/directive/passwordReset.html",scope:{email:"@",type:"@",size:"@"},controller:["$scope","AuthService",function(t,e){return t.type=t.type?t.type:"link",t.size=t.size?t.size:"md",t.state={sendLogin:!1,error:null},t.forgotLogin=function(){return t.email?e.login("email="+t.email+"&send_user_name=true").then(function(e){return t.state.sendLogin=!0}):t.state.error=!0}}]}}]),angular.module("luminateControllers").directive("progressBadges",["APP_INFO","$rootScope",function(e,r){return{templateUrl:e.rootPath+"html/directive/progressBadges.html",scope:{frId:"@",type:"@",id:"@",customBadgeData:"=?"},controller:["$scope","TeamraiserParticipantService","TeamraiserTeamService",function(a,e,t){return a.frId=a.frId?a.frId:r.frId,a.badges={defaultBadges:[],customBadges:[]},a.customBadgeData?(a.badges.customBadges=a.customBadges,a.$watch("customBadgeData",function(e){return a.badges.customBadges=e})):("individual"===a.type&&e.getParticipants("&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_page_size=1&fr_id="+a.frId+"&list_filter_column=reg.cons_id&list_filter_text="+a.id).then(function(e){var t;if(a.badges.defaultBadges=[null!=(t=e.data.getParticipantsResponse)?t.participant.badges:void 0],a.badges.defaultBadges[0].participantMilestoneLargeBadgeUrl&&(a.badges.defaultBadges[0].participantMilestoneLargeBadgeUrl=a.badges.defaultBadges[0].participantMilestoneLargeBadgeUrl.replace("/lg_","/")),a.badges.defaultBadges[0].personalDonationBadgeLargeUrl)return a.badges.defaultBadges[0].personalDonationBadgeLargeUrl=a.badges.defaultBadges[0].personalDonationBadgeLargeUrl.replace("/lg_","/")}),"team"===a.type?t.getTeams("team_id="+a.id+"&fr_id="+a.frId).then(function(e){var t;return a.badges.defaultBadges=[null!=(t=e.data.getTeamSearchByInfoResponse)?t.team.badges:void 0]}):void 0)}]}}]),angular.module("luminateControllers").directive("progressMeter",["APP_INFO","$rootScope",function(e,t){return{templateUrl:e.rootPath+"html/directive/progressMeter.html",scope:{type:"@",showMeterPercent:"@",frId:"@",id:"@",progressData:"=?"},controller:["$rootScope","$scope","$filter","TeamraiserEventService","TeamraiserParticipantService","TeamraiserTeamService","TeamraiserCompanyService",function(e,r,n,t,a,i,s){var o;return r.frId=r.frId?r.frId:e.frId,r.meter={goal:0,dollars:0,percent:0,hideMeter:null},o=function(e,t){var a;return a=e/t*100,r.meter={dollars:n("currency")(e/100,"$").replace(".00",""),goal:n("currency")(t/100,"$").replace(".00",""),percent:String(Math.round(a))+"%",hideMeter:a<r.showMeterPercent||a===1/0||NaN===a||null}},r.progressData?(r.progressData.amount/r.progressData.goal<r.showMeterPercent||null,o(r.progressData.amount,r.progressData.goal)):("event"===r.type&&t.getTeamRaiserData(r.frId).then(function(e){var t,a,r;if(e.teamraiser)return r=e.teamraiser,t=Number(r.dollars.replace(/[^\d.]/g,"")),a=Number(r.goal.replace(/[^\d.]/g,"")),o(100*t,100*a)}),"individual"===r.type&&a.getParticipants("&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_page_size=1&fr_id="+r.frId+"&list_filter_column=reg.cons_id&list_filter_text="+r.id).then(function(e){var t;if(e.data.getParticipantsResponse)return t=e.data.getParticipantsResponse.participant,o(Number(t.amountRaised),Number(t.goal))}),"team"===r.type&&i.getTeams("team_id="+r.id+"&fr_id="+r.frId).then(function(e){var t;if(e.data.getTeamSearchByInfoResponse)return t=e.data.getTeamSearchByInfoResponse.team,o(Number(t.amountRaised),Number(t.goal))}),"company"===r.type?s.getCompanies("company_id="+r.id+"&fr_id="+r.frId).then(function(e){var t;if(e.data.getCompaniesResponse)return t=e.data.getCompaniesResponse.company,o(t.amountRaised,t.goal)}):void 0)}]}}]),angular.module("luminateControllers").directive("rosterList",["APP_INFO","$rootScope",function(e,s){return{templateUrl:e.rootPath+"html/directive/rosterList.html",scope:{frId:"@",type:"@",id:"@",buttonSize:"@",includeSearch:"@",showBadges:"@",sortAscending:"@",sortColumn:"@",sizeLimit:"@",tableStripe:"@"},controller:["$scope","$httpParamSerializer","TeamraiserParticipantService","TeamraiserTeamService",function(r,t,a,n){var i;return r.frId=r.frId?r.frId:s.frId,r.sizeLimit?r.sizeLimit:25,r.state={searchType:"companyTeams"===r.type?"team":"participant",sortAscending:!!r.sortAscending&&r.sortAscending,sortColumn:r.sortColumn?r.sortColumn:"total",firstName:null,lastName:null,teamName:null,totalResults:0,currentPage:1,offset:null},i=function(){var e;return e={list_page_size:r.sizeLimit?r.sizeLimit:null,list_ascending:r.state.sortAscending,list_page_offset:r.state.offset?r.state.offset:null,list_sort_column:"participant"===r.state.searchType&&"name"===r.state.sortColumn?"first_name":r.state.sortColumn,fr_id:r.frId,team_name:"companyParticipants"===r.type?"%%%":null},"participant"===r.state.searchType?(e.first_name=r.state.firstName?r.state.firstName:"%",e.last_name=r.state.lastName?r.state.lastName:"%%",e.list_filter_column="teamParticipants"===r.type?"reg.team_id":"team.company_id",e.list_filter_text=r.id):(e.team_name=r.state.teamName?r.state.teamName:"%%%",e.team_company_id=r.id),e},r.findParticipants=function(e){return r.state.isLoading=!0,r.state.list=[],e||(r.state.currentPage=1,delete r.state.offset),a.getParticipants(t(i())).then(function(e){var t,a;return e.data.errorResponse?r.state.errorMessage=e.data.errorResponse.message:(t=null!=(a=e.data.getParticipantsResponse)?a.participant:void 0)?(delete r.state.errorMessage,r.state.totalResults=Number(e.data.getParticipantsResponse.totalNumberResults),angular.isArray(t)||(t=[t]),angular.forEach(t,function(e,t){var a;if(null!=(a=e.name)?a.first:void 0)return r.state.list.push(e)})):r.state.errorMessage="No participants returned in your search",delete r.state.isLoading})},r.findTeams=function(e){return r.state.isLoading=!0,r.state.list=[],e||(r.state.currentPage=1,delete r.state.offset),n.getTeams(t(i())).then(function(e){var t,a;return e.data.errorResponse?r.state.errorMessage=e.data.errorResponse.message:(a=null!=(t=e.data.getTeamSearchByInfoResponse)?t.team:void 0)?(delete r.state.errorMessage,r.state.totalResults=Number(e.data.getTeamSearchByInfoResponse.totalNumberResults),angular.isArray(a)||(a=[a]),r.state.list=a):r.state.errorMessage="No teams returned in your search",delete r.state.isLoading})},"teamParticipants"===r.type||"companyParticipants"===r.type?r.findParticipants(!1):r.findTeams(!1),r.paginateResults=function(){return r.state.offset=r.state.currentPage-1,"participant"===r.state.searchType?r.findParticipants(!0):r.findTeams(!0)},r.sortResults=function(e){return r.state.sortAscending=!r.state.sortAscending,r.state.sortColumn=e,"participant"===r.state.searchType?r.findParticipants(!1):r.findTeams(!1)}}]}}]),angular.module("luminateControllers").directive("topList",["APP_INFO","$rootScope",function(e,t){return{templateUrl:e.rootPath+"html/directive/topList.html",scope:{type:"@",sizeLimit:"@",showBadges:"@",id:"@",frId:"@",listData:"=?"},controller:["$rootScope","$scope","TeamraiserParticipantService","TeamraiserTeamService","TeamraiserCompanyService",function(e,t,a,r,n){var i,s;return t.frId=t.frId?t.frId:e.frId,t.list="loading",s=t.sizeLimit?t.sizeLimit:25,i=function(e){return t.list=e},t.listData?(t.list=t.listData,t.$watch("listData",function(e){return i(t.listData)})):("participants"===t.type&&a.getParticipants("&first_name="+encodeURIComponent("%%")+"&last_name="+encodeURIComponent("%")+"&list_sort_column=total&list_ascending=false&list_page_size="+s+"&fr_id="+t.frId).then(function(e){var t,r,a;return r=[],(a=null!=(t=e.data.getParticipantsResponse)?t.participant:void 0)&&(angular.isArray(a)||(a=[a]),angular.forEach(a,function(e,t){var a;if(null!=(a=e.name)?a.first:void 0)return r.push(e)})),i(r)}),"teams"===t.type&&r.getTeams("team_name="+encodeURIComponent("%")+"&list_sort_column=total&list_ascending=false&list_page_size="+s+"&fr_id="+t.frId).then(function(e){var t;return i(null!=(t=e.data.getTeamSearchByInfoResponse)?t.team:void 0)}),"companies"===t.type?n.getCompanies("company_name="+encodeURIComponent("%%%")+"&list_sort_column=total&list_ascending=false&list_page_size="+s+"&fr_id="+t.frId).then(function(e){var t;return i(null!=(t=e.data.getCompaniesResponse)?t.company:void 0)}):void 0)}]}}])}).call(this);